## How to run

* install foundry
* `ln -sf /path/to/your/protocol-monorepo sf`

In `scripts` there's helper scripts for running the tests.

Example invocation:
```sh
# arguments: network_name, test_contract
NETWORK=optimism-mainnet; PHASES=3 scripts/run_test.sh $NETWORK Upgrade_1_9_1 -vv
```
Here, `PHASES=3` stands for 1 & 2 (bitmask).

Invocation for a network using Safe:
```sh
NETWORK=base-mainnet; GOV_CALLDATA="0x870299c00000000000000000000000004c073b3bab6d8826b8c5b229f3cfdc1ec6e47e74000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000001eff3dd78f4a14abfa9fa66579bd3ce9e1b305290000000000000000000000002d5a247e5aca4d43dceac75d06a1eda9fa6d3f7f0000000000000000000000004023cd2cc04f2b3878b9eed179508400ab50c44600000000000000000000000046fd5cfb4c12d87acd3a13e92baa53240c661d930000000000000000000000004db26c973fae52f43bd96a8776c2bf1b0dc295560000000000000000000000005eacf6a1256d71182df319b38fddec30e23c5851000000000000000000000000708169c8c87563ce904e0a7f3bfc1f3b0b767f4100000000000000000000000084a653a249a2c2c52617275edcd82afa227df37b000000000000000000000000af3536b582e4d1b113b924e5e7341bef228f9166000000000000000000000000d04383398dd2426297da660f9cca3d439af9ce1b000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba000000000000000000000000992805ed822c786bcdba4cb1f07b5cada3bc3cba" PHASES=2 scripts/run_test.sh $NETWORK Upgrade_1_9_1 -vv
```

In order to upgrade foundry, checkout https://github.com/foundry-rs/forge-std and place it in lib